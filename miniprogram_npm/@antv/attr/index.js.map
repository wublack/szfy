{"version":3,"sources":["attr.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"attr\"] = factory();\r\n\telse\r\n\t\troot[\"attr\"] = factory();\r\n})(typeof self !== 'undefined' ? self : this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n/**\r\n * @fileOverview the Attribute base class\r\n */\r\nvar isString = __webpack_require__(4);\r\n\r\nvar isArray = __webpack_require__(1);\r\n\r\nvar isNil = __webpack_require__(5);\r\n\r\nvar mix = __webpack_require__(10);\r\n\r\nvar each = __webpack_require__(3);\r\n\r\nfunction toScaleString(scale, value) {\r\n  if (isString(value)) {\r\n    return value;\r\n  }\r\n\r\n  return scale.invert(scale.scale(value));\r\n}\r\n/**\r\n * 所有视觉通道属性的基类\r\n * @class Attr\r\n */\r\n\r\n\r\nvar AttributeBase =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function AttributeBase(cfg) {\r\n    var _this = this;\r\n\r\n    /**\r\n     * 属性的类型\r\n     * @type {String}\r\n     */\r\n    this.type = 'base';\r\n    /**\r\n     * 属性的名称\r\n     * @type {String}\r\n     */\r\n\r\n    this.name = null;\r\n    /**\r\n     * 回调函数\r\n     * @type {Function}\r\n     */\r\n\r\n    this.method = null;\r\n    /**\r\n     * 备选的值数组\r\n     * @type {Array}\r\n     */\r\n\r\n    this.values = [];\r\n    /**\r\n     * 属性内部的度量\r\n     * @type {Array}\r\n     */\r\n\r\n    this.scales = [];\r\n    /**\r\n     * 是否通过线性取值, 如果未指定，则根据数值的类型判定\r\n     * @type {Boolean}\r\n     */\r\n\r\n    this.linear = null;\r\n    /**\r\n     * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\r\n     */\r\n\r\n    var mixedCallback = null;\r\n    var defaultCallback = this.callback;\r\n\r\n    if (cfg.callback) {\r\n      var userCallback = cfg.callback;\r\n\r\n      mixedCallback = function mixedCallback() {\r\n        for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\r\n          params[_key] = arguments[_key];\r\n        }\r\n\r\n        var ret = userCallback.apply(void 0, params);\r\n\r\n        if (isNil(ret)) {\r\n          ret = defaultCallback.apply(_this, params);\r\n        }\r\n\r\n        return ret;\r\n      };\r\n    }\r\n\r\n    mix(this, cfg);\r\n\r\n    if (mixedCallback) {\r\n      mix(this, {\r\n        callback: mixedCallback\r\n      });\r\n    }\r\n  } // 获取属性值，将值映射到视觉通道\r\n\r\n\r\n  var _proto = AttributeBase.prototype;\r\n\r\n  _proto._getAttrValue = function _getAttrValue(scale, value) {\r\n    var values = this.values;\r\n\r\n    if (scale.isCategory && !this.linear) {\r\n      var index = scale.translate(value);\r\n      return values[index % values.length];\r\n    }\r\n\r\n    var percent = scale.scale(value);\r\n    return this.getLinearValue(percent);\r\n  };\r\n  /**\r\n   * 如果进行线性映射，返回对应的映射值\r\n   * @protected\r\n   * @param  {Number} percent 百分比\r\n   * @return {*}  颜色值、形状、大小等\r\n   */\r\n\r\n\r\n  _proto.getLinearValue = function getLinearValue(percent) {\r\n    var values = this.values;\r\n    var steps = values.length - 1;\r\n    var step = Math.floor(steps * percent);\r\n    var leftPercent = steps * percent - step;\r\n    var start = values[step];\r\n    var end = step === steps ? start : values[step + 1];\r\n    var rstValue = start + (end - start) * leftPercent;\r\n    return rstValue;\r\n  };\r\n  /**\r\n   * 默认的回调函数\r\n   * @param {*} value 回调函数的值\r\n   * @type {Function}\r\n   * @return {Array} 返回映射后的值\r\n   */\r\n\r\n\r\n  _proto.callback = function callback(value) {\r\n    var self = this;\r\n    var scale = self.scales[0];\r\n    var rstValue = null;\r\n\r\n    if (scale.type === 'identity') {\r\n      rstValue = scale.value;\r\n    } else {\r\n      rstValue = self._getAttrValue(scale, value);\r\n    }\r\n\r\n    return rstValue;\r\n  };\r\n  /**\r\n   * 根据度量获取属性名\r\n   * @return {Array} dims of this Attribute\r\n   */\r\n\r\n\r\n  _proto.getNames = function getNames() {\r\n    var scales = this.scales;\r\n    var names = this.names;\r\n    var length = Math.min(scales.length, names.length);\r\n    var rst = [];\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      rst.push(names[i]);\r\n    }\r\n\r\n    return rst;\r\n  };\r\n  /**\r\n   * 根据度量获取维度名\r\n   * @return {Array} dims of this Attribute\r\n   */\r\n\r\n\r\n  _proto.getFields = function getFields() {\r\n    var scales = this.scales;\r\n    var rst = [];\r\n    each(scales, function (scale) {\r\n      rst.push(scale.field);\r\n    });\r\n    return rst;\r\n  };\r\n  /**\r\n   * 根据名称获取度量\r\n   * @param  {String} name the name of scale\r\n   * @return {Scale} scale\r\n   */\r\n\r\n\r\n  _proto.getScale = function getScale(name) {\r\n    var scales = this.scales;\r\n    var names = this.names;\r\n    var index = names.indexOf(name);\r\n    return scales[index];\r\n  };\r\n  /**\r\n   * 映射数据\r\n   * @param {*} param1...paramn 多个数值\r\n   * @return {Array} 映射的值组成的数组\r\n   */\r\n\r\n\r\n  _proto.mapping = function mapping() {\r\n    var scales = this.scales;\r\n    var callback = this.callback;\r\n\r\n    for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      params[_key2] = arguments[_key2];\r\n    }\r\n\r\n    var values = params;\r\n\r\n    if (callback) {\r\n      for (var i = 0, len = params.length; i < len; i++) {\r\n        params[i] = this._toOriginParam(params[i], scales[i]);\r\n      }\r\n\r\n      values = callback.apply(this, params);\r\n    }\r\n\r\n    values = [].concat(values);\r\n    return values;\r\n  }; // 原始的参数\r\n\r\n\r\n  _proto._toOriginParam = function _toOriginParam(param, scale) {\r\n    var rst = param;\r\n\r\n    if (!scale.isLinear) {\r\n      if (isArray(param)) {\r\n        rst = [];\r\n\r\n        for (var i = 0, len = param.length; i < len; i++) {\r\n          rst.push(toScaleString(scale, param[i]));\r\n        }\r\n      } else {\r\n        rst = toScaleString(scale, param);\r\n      }\r\n    }\r\n\r\n    return rst;\r\n  };\r\n\r\n  return AttributeBase;\r\n}();\r\n\r\nmodule.exports = AttributeBase;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nvar isType = __webpack_require__(2);\r\n\r\nvar isArray = Array.isArray ? Array.isArray : function (value) {\r\n  return isType(value, 'Array');\r\n};\r\nmodule.exports = isArray;\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports) {\r\n\r\nvar toString = {}.toString;\r\n\r\nvar isType = function isType(value, type) {\r\n  return toString.call(value) === '[object ' + type + ']';\r\n};\r\n\r\nmodule.exports = isType;\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nvar isObject = __webpack_require__(9);\r\n\r\nvar isArray = __webpack_require__(1);\r\n\r\nvar each = function each(elements, func) {\r\n  if (!elements) {\r\n    return;\r\n  }\r\n\r\n  var rst = void 0;\r\n\r\n  if (isArray(elements)) {\r\n    for (var i = 0, len = elements.length; i < len; i++) {\r\n      rst = func(elements[i], i);\r\n\r\n      if (rst === false) {\r\n        break;\r\n      }\r\n    }\r\n  } else if (isObject(elements)) {\r\n    for (var k in elements) {\r\n      if (elements.hasOwnProperty(k)) {\r\n        rst = func(elements[k], k);\r\n\r\n        if (rst === false) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = each;\r\n\r\n/***/ }),\r\n/* 4 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nvar isType = __webpack_require__(2);\r\n\r\nvar isString = function isString(str) {\r\n  return isType(str, 'String');\r\n};\r\n\r\nmodule.exports = isString;\r\n\r\n/***/ }),\r\n/* 5 */\r\n/***/ (function(module, exports) {\r\n\r\n// isFinite,\r\nvar isNil = function isNil(value) {\r\n  /**\r\n   * isNil(null) => true\r\n   * isNil() => true\r\n   */\r\n  return value === null || value === undefined;\r\n};\r\n\r\nmodule.exports = isNil;\r\n\r\n/***/ }),\r\n/* 6 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n/**\r\n * @fileOverview 颜色计算的辅助方法\r\n * @author dxq613@gmail.com\r\n */\r\nvar isNumber = __webpack_require__(12);\r\n\r\nvar isString = __webpack_require__(4);\r\n\r\nvar each = __webpack_require__(3); // const RGB_REG = /rgb\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/;\r\n\r\n\r\nvar RGB_REG = /rgba?\\(([\\s.,0-9]+)\\)/; // 创建辅助 tag 取颜色\r\n\r\nfunction createTmp() {\r\n  var i = document.createElement('i');\r\n  i.title = 'Web Colour Picker';\r\n  i.style.display = 'none';\r\n  document.body.appendChild(i);\r\n  return i;\r\n} // 获取颜色之间的插值\r\n\r\n\r\nfunction getValue(start, end, percent, index) {\r\n  var value = start[index] + (end[index] - start[index]) * percent;\r\n  return value;\r\n} // 数组转换成颜色\r\n\r\n\r\nfunction arr2rgb(arr) {\r\n  return '#' + toHex(arr[0]) + toHex(arr[1]) + toHex(arr[2]);\r\n} // 将数值从 0-255 转换成16进制字符串\r\n\r\n\r\nfunction toHex(value) {\r\n  value = Math.round(value);\r\n  value = value.toString(16);\r\n\r\n  if (value.length === 1) {\r\n    value = '0' + value;\r\n  }\r\n\r\n  return value;\r\n}\r\n\r\nfunction calColor(colors, percent) {\r\n  if (isNaN(percent) || !isNumber(percent) || percent < 0) {\r\n    percent = 0;\r\n  }\r\n\r\n  if (percent > 1) {\r\n    percent = 1;\r\n  }\r\n\r\n  var steps = colors.length - 1;\r\n  var step = Math.floor(steps * percent);\r\n  var left = steps * percent - step;\r\n  var start = colors[step];\r\n  var end = step === steps ? start : colors[step + 1];\r\n  var rgb = arr2rgb([getValue(start, end, left, 0), getValue(start, end, left, 1), getValue(start, end, left, 2)]);\r\n  return rgb;\r\n} // rgb 颜色转换成数组\r\n\r\n\r\nfunction rgb2arr(str) {\r\n  var arr = [];\r\n  arr.push(parseInt(str.substr(1, 2), 16));\r\n  arr.push(parseInt(str.substr(3, 2), 16));\r\n  arr.push(parseInt(str.substr(5, 2), 16));\r\n  return arr;\r\n}\r\n\r\nvar colorCache = {};\r\nvar iEl = null;\r\nvar ColorUtil = {\r\n  /**\r\n   * 将颜色转换到 rgb 的格式\r\n   * @param  {String} color 颜色\r\n   * @return {String} 将颜色转换到 '#ffffff' 的格式\r\n   */\r\n  toRGB: function toRGB(color) {\r\n    // 如果已经是 rgb的格式\r\n    if (color[0] === '#' && color.length === 7) {\r\n      return color;\r\n    }\r\n\r\n    if (!iEl) {\r\n      // 防止防止在页头报错\r\n      iEl = createTmp();\r\n    }\r\n\r\n    var rst;\r\n\r\n    if (colorCache[color]) {\r\n      rst = colorCache[color];\r\n    } else {\r\n      iEl.style.color = color;\r\n      rst = document.defaultView.getComputedStyle(iEl, '').getPropertyValue('color');\r\n      var matchs = RGB_REG.exec(rst);\r\n      var cArray = matchs[1].split(/\\s*,\\s*/);\r\n      rst = arr2rgb(cArray);\r\n      colorCache[color] = rst;\r\n    }\r\n\r\n    return rst;\r\n  },\r\n  rgb2arr: rgb2arr,\r\n\r\n  /**\r\n   * 获取渐变函数\r\n   * @param  {Array} colors 多个颜色\r\n   * @return {String} 颜色值\r\n   */\r\n  gradient: function gradient(colors) {\r\n    var points = [];\r\n\r\n    if (isString(colors)) {\r\n      colors = colors.split('-');\r\n    }\r\n\r\n    each(colors, function (color) {\r\n      if (color.indexOf('#') === -1) {\r\n        color = ColorUtil.toRGB(color);\r\n      }\r\n\r\n      points.push(rgb2arr(color));\r\n    });\r\n    return function (percent) {\r\n      return calColor(points, percent);\r\n    };\r\n  }\r\n};\r\nmodule.exports = ColorUtil;\r\n\r\n/***/ }),\r\n/* 7 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nmodule.exports = {\r\n  Position: __webpack_require__(8),\r\n  Color: __webpack_require__(11),\r\n  Shape: __webpack_require__(13),\r\n  Size: __webpack_require__(14),\r\n  Opacity: __webpack_require__(15),\r\n  ColorUtil: __webpack_require__(6)\r\n};\r\n\r\n/***/ }),\r\n/* 8 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nvar isNil = __webpack_require__(5);\r\n\r\nvar isArray = __webpack_require__(1);\r\n\r\nvar each = __webpack_require__(3);\r\n\r\nvar Base = __webpack_require__(0);\r\n\r\nvar Position =\r\n/*#__PURE__*/\r\nfunction (_Base) {\r\n  _inheritsLoose(Position, _Base);\r\n\r\n  function Position(cfg) {\r\n    var _this;\r\n\r\n    _this = _Base.call(this, cfg) || this;\r\n    _this.names = ['x', 'y'];\r\n    _this.type = 'position';\r\n    return _this;\r\n  }\r\n\r\n  var _proto = Position.prototype;\r\n\r\n  _proto.mapping = function mapping(x, y) {\r\n    var scales = this.scales;\r\n    var coord = this.coord;\r\n    var scaleX = scales[0];\r\n    var scaleY = scales[1];\r\n    var rstX;\r\n    var rstY;\r\n    var obj;\r\n\r\n    if (isNil(x) || isNil(y)) {\r\n      return [];\r\n    }\r\n\r\n    if (isArray(y) && isArray(x)) {\r\n      rstX = [];\r\n      rstY = [];\r\n\r\n      for (var i = 0, j = 0, xLen = x.length, yLen = y.length; i < xLen && j < yLen; i++, j++) {\r\n        obj = coord.convertPoint({\r\n          x: scaleX.scale(x[i]),\r\n          y: scaleY.scale(y[j])\r\n        });\r\n        rstX.push(obj.x);\r\n        rstY.push(obj.y);\r\n      }\r\n    } else if (isArray(y)) {\r\n      x = scaleX.scale(x);\r\n      rstY = [];\r\n      each(y, function (yVal) {\r\n        yVal = scaleY.scale(yVal);\r\n        obj = coord.convertPoint({\r\n          x: x,\r\n          y: yVal\r\n        });\r\n\r\n        if (rstX && rstX !== obj.x) {\r\n          if (!isArray(rstX)) {\r\n            rstX = [rstX];\r\n          }\r\n\r\n          rstX.push(obj.x);\r\n        } else {\r\n          rstX = obj.x;\r\n        }\r\n\r\n        rstY.push(obj.y);\r\n      });\r\n    } else if (isArray(x)) {\r\n      y = scaleY.scale(y);\r\n      rstX = [];\r\n      each(x, function (xVal) {\r\n        xVal = scaleX.scale(xVal);\r\n        obj = coord.convertPoint({\r\n          x: xVal,\r\n          y: y\r\n        });\r\n\r\n        if (rstY && rstY !== obj.y) {\r\n          if (!isArray(rstY)) {\r\n            rstY = [rstY];\r\n          }\r\n\r\n          rstY.push(obj.y);\r\n        } else {\r\n          rstY = obj.y;\r\n        }\r\n\r\n        rstX.push(obj.x);\r\n      });\r\n    } else {\r\n      x = scaleX.scale(x);\r\n      y = scaleY.scale(y);\r\n      var point = coord.convertPoint({\r\n        x: x,\r\n        y: y\r\n      });\r\n      rstX = point.x;\r\n      rstY = point.y;\r\n    }\r\n\r\n    return [rstX, rstY];\r\n  };\r\n\r\n  return Position;\r\n}(Base);\r\n\r\nmodule.exports = Position;\r\n\r\n/***/ }),\r\n/* 9 */\r\n/***/ (function(module, exports) {\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\r\n  return typeof obj;\r\n} : function (obj) {\r\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n};\r\n\r\nvar isObject = function isObject(value) {\r\n  /**\r\n   * isObject({}) => true\r\n   * isObject([1, 2, 3]) => true\r\n   * isObject(Function) => true\r\n   * isObject(null) => false\r\n   */\r\n  var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\r\n  return value !== null && type === 'object' || type === 'function';\r\n};\r\n\r\nmodule.exports = isObject;\r\n\r\n/***/ }),\r\n/* 10 */\r\n/***/ (function(module, exports) {\r\n\r\nfunction _mix(dist, obj) {\r\n  for (var key in obj) {\r\n    if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\r\n      dist[key] = obj[key];\r\n    }\r\n  }\r\n}\r\n\r\nvar mix = function mix(dist, src1, src2, src3) {\r\n  if (src1) _mix(dist, src1);\r\n  if (src2) _mix(dist, src2);\r\n  if (src3) _mix(dist, src3);\r\n  return dist;\r\n};\r\n\r\nmodule.exports = mix;\r\n\r\n/***/ }),\r\n/* 11 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nvar isString = __webpack_require__(4);\r\n\r\nvar ColorUtil = __webpack_require__(6);\r\n\r\nvar Base = __webpack_require__(0);\r\n\r\nvar Color =\r\n/*#__PURE__*/\r\nfunction (_Base) {\r\n  _inheritsLoose(Color, _Base);\r\n\r\n  function Color(cfg) {\r\n    var _this;\r\n\r\n    _this = _Base.call(this, cfg) || this;\r\n    _this.names = ['color'];\r\n    _this.type = 'color';\r\n    _this.gradient = null;\r\n\r\n    if (isString(_this.values)) {\r\n      _this.linear = true;\r\n    }\r\n\r\n    return _this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  var _proto = Color.prototype;\r\n\r\n  _proto.getLinearValue = function getLinearValue(percent) {\r\n    var gradient = this.gradient;\r\n\r\n    if (!gradient) {\r\n      var values = this.values;\r\n      gradient = ColorUtil.gradient(values);\r\n      this.gradient = gradient;\r\n    }\r\n\r\n    return gradient(percent);\r\n  };\r\n\r\n  return Color;\r\n}(Base);\r\n\r\nmodule.exports = Color;\r\n\r\n/***/ }),\r\n/* 12 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n/**\r\n * 判断是否数字\r\n * @return {Boolean} 是否数字\r\n */\r\nvar isType = __webpack_require__(2);\r\n\r\nvar isNumber = function isNumber(value) {\r\n  return isType(value, 'Number');\r\n};\r\n\r\nmodule.exports = isNumber;\r\n\r\n/***/ }),\r\n/* 13 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nvar Base = __webpack_require__(0);\r\n\r\nvar Shape =\r\n/*#__PURE__*/\r\nfunction (_Base) {\r\n  _inheritsLoose(Shape, _Base);\r\n\r\n  function Shape(cfg) {\r\n    var _this;\r\n\r\n    _this = _Base.call(this, cfg) || this;\r\n    _this.names = ['shape'];\r\n    _this.type = 'shape';\r\n    _this.gradient = null;\r\n    return _this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  var _proto = Shape.prototype;\r\n\r\n  _proto.getLinearValue = function getLinearValue(percent) {\r\n    var values = this.values;\r\n    var index = Math.round((values.length - 1) * percent);\r\n    return values[index];\r\n  };\r\n\r\n  return Shape;\r\n}(Base);\r\n\r\nmodule.exports = Shape;\r\n\r\n/***/ }),\r\n/* 14 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nvar Base = __webpack_require__(0);\r\n\r\nvar Size =\r\n/*#__PURE__*/\r\nfunction (_Base) {\r\n  _inheritsLoose(Size, _Base);\r\n\r\n  function Size(cfg) {\r\n    var _this;\r\n\r\n    _this = _Base.call(this, cfg) || this;\r\n    _this.names = ['size'];\r\n    _this.type = 'size';\r\n    _this.gradient = null;\r\n    return _this;\r\n  }\r\n\r\n  return Size;\r\n}(Base);\r\n\r\nmodule.exports = Size;\r\n\r\n/***/ }),\r\n/* 15 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nvar Base = __webpack_require__(0);\r\n\r\nvar Opacity =\r\n/*#__PURE__*/\r\nfunction (_Base) {\r\n  _inheritsLoose(Opacity, _Base);\r\n\r\n  function Opacity(cfg) {\r\n    var _this;\r\n\r\n    _this = _Base.call(this, cfg) || this;\r\n    _this.names = ['opacity'];\r\n    _this.type = 'opacity';\r\n    _this.gradient = null;\r\n    return _this;\r\n  }\r\n\r\n  return Opacity;\r\n}(Base);\r\n\r\nmodule.exports = Opacity;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=attr.js.map"]}